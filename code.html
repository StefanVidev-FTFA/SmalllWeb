<!DOCTYPE html>
<html>
<head>
<title>Dynamic Boxes</title>
<style>
    .box {
        border: 2px solid black;
        padding: 20px;
        margin: 10px;
        display: inline-block;
        width: 150px;
        text-align: center;
    }
    .color-square {
        width: 50px;
        height: 50px;
        border: 2px solid black;
        display: inline-block;
        vertical-align: middle;
        margin-left: 10px;
        cursor: pointer;
    }
    .red {
        background-color: red;
    }
    .green {
        background-color: green;
    }
</style>
</head>
<body>

<button id="createButton">Create New Box</button>

<script>
    document.getElementById('createButton').addEventListener('click', function() {
        const container = document.createElement('div');
        container.style.marginTop = '20px';

        const newBox = document.createElement('div');
        newBox.className = 'box';
        newBox.textContent = 'nameMe';
        newBox.addEventListener('dblclick', function() {
            const newName = prompt("Enter a new name for the box:", this.textContent);
            if (newName) {
                this.textContent = newName;
            }
        });

        const colorSquare = document.createElement('div');
        colorSquare.className = 'color-square red';
        colorSquare.addEventListener('click', function() {
            if (this.classList.contains('red')) {
                this.classList.remove('red');
                this.classList.add('green');
            } else {
                this.classList.remove('green');
                this.classList.add('red');
            }
        });

        container.appendChild(newBox);
        container.appendChild(colorSquare);
        document.body.appendChild(container);
    });
</script>

</body>
</html>